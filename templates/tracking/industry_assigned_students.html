{% extends "base.html" %}
{% block title %}Assigned Students — Industry Supervisor{% endblock %}

{% block content %}
<div class="row g-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2">
        <div>
          <div class="fw-bold">Assigned Students</div>
          <div class="text-muted small">
            Company: <span class="fw-semibold text-dark">{{ company.name }}</span>
          </div>
        </div>

        <a href="{% url 'supervisor_students' %}" class="btn btn-light border btn-sm">
          <i class="bi bi-arrow-clockwise me-1"></i> Refresh
        </a>
      </div>

      <div class="card-body">
        {% if placements %}
          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th>Student</th>
                  <th>Reg No</th>
                  <th>Company</th>
                  <th>Period</th>
                  <th>Status</th>
                  <th class="text-end">Actions</th>
                </tr>
              </thead>

              <tbody>
                {% for p in placements %}
                  <tr>
                    <td class="fw-semibold">
                      <i class="bi bi-person-badge text-danger me-1"></i>
                      {{ p.request.student.user.display_name }}
                    </td>
                    <td>{{ p.request.student.reg_no }}</td>
                    <td>{{ p.company.name }}</td>
                    <td class="small text-muted">
                      {{ p.start_date }} → {{ p.end_date }}
                    </td>
                    <td>
                      <span class="badge text-bg-light border">{{ p.status }}</span>
                    </td>
                    <td class="text-end">
                      <div class="d-inline-flex gap-2 justify-content-end flex-wrap">
                        <a class="btn btn-outline-danger btn-sm"
                           href="{% url 'company_pending_logs' %}">
                          <i class="bi bi-journal-text me-1"></i> Logs
                        </a>

                        <a class="btn btn-outline-primary btn-sm"
                           href="{% url 'company_evaluate_student' p.id %}">
                          <i class="bi bi-clipboard2-check me-1"></i> Evaluate
                        </a>
                      </div>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>

            </table>
          </div>
        {% else %}
          <div class="text-center py-5">
            <i class="bi bi-people text-danger" style="font-size:2rem;"></i>
            <div class="fw-bold mt-2">No students assigned yet</div>
            <div class="text-muted small">
              Once placements are activated and linked to your company, they will appear here.
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
